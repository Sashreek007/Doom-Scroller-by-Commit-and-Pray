import{g as S,C as d,M as C}from"./constants-DnDMOe8K.js";const g={facebook:{site:"facebook",scrollContainerSelectors:[]},x:{site:"x",scrollContainerSelectors:['[data-testid="primaryColumn"]','main[role="main"]','[aria-label="Timeline: Your Home Timeline"]']},tiktok:{site:"tiktok",scrollContainerSelectors:[]},instagram:{site:"instagram",scrollContainerSelectors:[]},snapchat:{site:"snapchat",scrollContainerSelectors:[]},reddit:{site:"reddit",scrollContainerSelectors:[]},youtube:{site:"youtube",scrollContainerSelectors:[]},pinterest:{site:"pinterest",scrollContainerSelectors:[]}};function T(){const e=window.location.hostname.toLowerCase(),o=S(e);return o?{...g[o],hostname:e}:null}function p(e){for(const o of e.scrollContainerSelectors){const r=document.querySelector(o);if(r)return r}return window}function a(e){return"scrollY"in e?e.scrollY:e.scrollTop}const E=2e3,u=T();if(!u)console.warn("[DoomScroller] No config for",window.location.hostname);else{let e=function(){if(!t)return;const n=a(t),c=Math.abs(n-i);c>1&&c<5e4&&(l+=c),i=n},o=function(){t&&t.removeEventListener("scroll",e)},r=function(){const n=p(s);t!==n&&(o(),t=n,i=a(t),t.addEventListener("scroll",e,{passive:!0}))};const s=u;let l=0,t=null,i=0;r();const m=setInterval(r,E),f=setInterval(()=>{if(l>0){const n={type:"SCROLL_UPDATE",payload:{site:s.site,pixels:l,meters:l*C,timestamp:Date.now()}};chrome.runtime.sendMessage(n).catch(()=>{}),l=0}},d);window.addEventListener("beforeunload",()=>{clearInterval(m),clearInterval(f),o()}),console.log("[DoomScroller] Tracking scroll on",s.site,"(",s.hostname,")")}
