import{g as $,C as U,M as X}from"./constants-BqRKAH88.js";import{m as I}from"./coins-CEGumQio.js";const j={facebook:{site:"facebook",scrollContainerSelectors:[]},x:{site:"x",scrollContainerSelectors:['[data-testid="primaryColumn"]','main[role="main"]','[aria-label="Timeline: Your Home Timeline"]']},tiktok:{site:"tiktok",scrollContainerSelectors:[]},instagram:{site:"instagram",scrollContainerSelectors:[]},snapchat:{site:"snapchat",scrollContainerSelectors:[]},reddit:{site:"reddit",scrollContainerSelectors:[]},youtube:{site:"youtube",scrollContainerSelectors:[]},pinterest:{site:"pinterest",scrollContainerSelectors:[]}};function q(){const s=window.location.hostname.toLowerCase(),a=$(s);return a?{...j[a],hostname:s}:null}function G(s){for(const a of s.scrollContainerSelectors){const y=document.querySelector(a);if(y)return y}return window}function k(s){return"scrollY"in s?s.scrollY:s.scrollTop}const J=2e3,W=2e3,K=3,f=170,C=200,Q=1300,Z=2600,B=q();if(!B)console.warn("[DoomScroller] No config for",window.location.hostname);else{let s=function(){if(c&&document.documentElement.contains(c))return c;const e=document.createElement("div");return e.style.position="fixed",e.style.top="18px",e.style.right="18px",e.style.zIndex="2147483646",e.style.pointerEvents="none",e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="flex-end",e.style.gap="8px",(document.body??document.documentElement).appendChild(e),c=e,e},a=function(e,t){const n=Date.now(),r=Math.max(n,L),m=Math.max(0,r-n),i=T?t+80:f+t+C+30;L=r+i,window.setTimeout(()=>{const d=s(),o=e();if(o.style.opacity="0",o.style.transform=T?"translateY(0) scale(1)":"translateY(10px) scale(0.94)",o.style.transition=T?"none":`opacity ${f}ms ease, transform ${f}ms ease`,d.appendChild(o),T){o.style.opacity="1",window.setTimeout(()=>{o.remove()},t);return}window.setTimeout(()=>{o.style.opacity="1",o.style.transform="translateY(0) scale(1)"},16),window.setTimeout(()=>{o.style.transition=`opacity ${C}ms ease, transform ${C}ms ease`,o.style.opacity="0",o.style.transform="translateY(-8px) scale(0.98)"},f+t),window.setTimeout(()=>{o.remove()},f+t+C+24)},m)},y=function(){const e=document.createElement("div");return e.textContent="ü™ô +1 Coin",e.style.padding="11px 16px",e.style.borderRadius="999px",e.style.background="linear-gradient(135deg, rgba(255,230,80,0.56), rgba(245,158,11,0.52))",e.style.border="2px solid rgba(253,224,71,0.95)",e.style.color="#fffde9",e.style.fontFamily="JetBrains Mono, Inter, system-ui, sans-serif",e.style.fontSize="16px",e.style.fontWeight="800",e.style.letterSpacing="0.03em",e.style.textShadow="0 0 10px rgba(255,245,157,0.85)",e.style.boxShadow="0 0 24px rgba(250,204,21,0.78), 0 0 42px rgba(245,158,11,0.44)",e.style.backdropFilter="blur(6px)",e},O=function(e){return e==="legendary"?{border:"1px solid rgba(244,114,182,0.95)",background:"linear-gradient(135deg, rgba(244,114,182,0.28), rgba(217,70,239,0.32))",glow:"0 0 26px rgba(217,70,239,0.55), 0 0 42px rgba(244,114,182,0.38)",titleColor:"#fce7f3"}:e==="epic"?{border:"1px solid rgba(56,189,248,0.9)",background:"linear-gradient(135deg, rgba(34,211,238,0.25), rgba(59,130,246,0.32))",glow:"0 0 24px rgba(56,189,248,0.52), 0 0 38px rgba(59,130,246,0.32)",titleColor:"#e0f2fe"}:e==="rare"?{border:"1px solid rgba(74,222,128,0.95)",background:"linear-gradient(135deg, rgba(74,222,128,0.22), rgba(34,197,94,0.3))",glow:"0 0 22px rgba(74,222,128,0.45)",titleColor:"#dcfce7"}:{border:"1px solid rgba(148,163,184,0.8)",background:"linear-gradient(135deg, rgba(148,163,184,0.2), rgba(100,116,139,0.25))",glow:"0 0 14px rgba(148,163,184,0.3)",titleColor:"#f8fafc"}},F=function(e){const t=O(e.rarity),n=document.createElement("div");n.style.width="min(320px, calc(100vw - 32px))",n.style.padding="12px 14px",n.style.borderRadius="14px",n.style.border=t.border,n.style.background=t.background,n.style.backdropFilter="blur(8px)",n.style.boxShadow=t.glow,n.style.color="#e5e7eb",n.style.fontFamily="JetBrains Mono, Inter, system-ui, sans-serif";const r=document.createElement("div");r.style.display="flex",r.style.alignItems="center",r.style.gap="8px",r.style.marginBottom="6px";const m=document.createElement("span");m.textContent=e.icon||"üèÜ",m.style.fontSize="20px",m.style.lineHeight="1";const i=document.createElement("span");i.textContent=e.title||"New Achievement",i.style.fontSize="13px",i.style.fontWeight="800",i.style.letterSpacing="0.04em",i.style.color=t.titleColor,i.style.textTransform="uppercase";const d=document.createElement("span");d.textContent=e.rarity.toUpperCase(),d.style.marginLeft="auto",d.style.fontSize="10px",d.style.opacity="0.9",r.appendChild(m),r.appendChild(i),r.appendChild(d);const o=document.createElement("div");o.textContent=e.description,o.style.fontSize="12px",o.style.lineHeight="1.35",o.style.opacity="0.95",o.style.marginBottom="6px";const u=document.createElement("div");return u.textContent=e.roastLine,u.style.fontSize="11px",u.style.lineHeight="1.35",u.style.opacity="0.84",u.style.fontStyle="italic",n.appendChild(r),e.description&&n.appendChild(o),e.roastLine&&n.appendChild(u),n},H=function(e){if(!(e<=0))for(let t=0;t<e;t+=1)a(y,Q)},Y=function(e){a(()=>F(e),Z)},z=function(e){if(!e||typeof e!="object")return!1;const t=e;if(t.type!=="ACHIEVEMENT_TOAST"||!t.payload||typeof t.payload!="object")return!1;const n=t.payload;return typeof n.eventKey=="string"&&typeof n.title=="string"&&typeof n.description=="string"&&typeof n.icon=="string"&&typeof n.rarity=="string"&&typeof n.roastLine=="string"},D=function(e){if(!Number.isFinite(e)||e<=0||(b+=e,!E))return;const t=I(x+b),n=t-S;n>0&&(H(n),S=t)},v=function(){if(!l)return;const e=k(l),t=Math.abs(e-h);t>1&&t<5e4&&(p+=t),h=e},_=function(){l&&l.removeEventListener("scroll",v)},M=function(){const e=G(g);l!==e&&(_(),l=e,h=k(l),l.addEventListener("scroll",v,{passive:!0}))};const g=B;let p=0,l=null,h=0,x=0,b=0,S=0,E=!1,A=0,w=null,c=null,L=0;const T=window.matchMedia("(prefers-reduced-motion: reduce)").matches;async function N(){A+=1;try{const e=await chrome.runtime.sendMessage({type:"GET_STATS"}),t=Number((e==null?void 0:e.totalMeters)??0);if(Number.isFinite(t)){x=t,E=!0,S=I(x+b);return}}catch{}if(A<K){w=window.setTimeout(()=>{N()},W);return}x=0,E=!0,S=I(b)}const R=e=>{z(e)&&Y(e.payload)};chrome.runtime.onMessage.addListener(R),M();const V=setInterval(M,J);N();const P=setInterval(()=>{if(p>0){const e=p*X,t={type:"SCROLL_UPDATE",payload:{site:g.site,pixels:p,meters:e,timestamp:Date.now()}};chrome.runtime.sendMessage(t).catch(()=>{}),D(e),p=0}},U);window.addEventListener("beforeunload",()=>{clearInterval(V),clearInterval(P),chrome.runtime.onMessage.removeListener(R),w!==null&&window.clearTimeout(w),c&&(c.remove(),c=null),_()}),console.log("[DoomScroller] Tracking scroll on",g.site,"(",g.hostname,")")}
