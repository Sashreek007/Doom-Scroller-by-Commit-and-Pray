import{g as re,C as le,M as se}from"./constants-BqRKAH88.js";import{m as B}from"./coins-CEGumQio.js";const ae={facebook:{site:"facebook",scrollContainerSelectors:[]},x:{site:"x",scrollContainerSelectors:['[data-testid="primaryColumn"]','main[role="main"]','[aria-label="Timeline: Your Home Timeline"]']},tiktok:{site:"tiktok",scrollContainerSelectors:[]},instagram:{site:"instagram",scrollContainerSelectors:[]},snapchat:{site:"snapchat",scrollContainerSelectors:[]},reddit:{site:"reddit",scrollContainerSelectors:[]},youtube:{site:"youtube",scrollContainerSelectors:[]},pinterest:{site:"pinterest",scrollContainerSelectors:[]}};function ie(){const a=window.location.hostname.toLowerCase(),y=re(a);return y?{...ae[y],hostname:a}:null}function ce(a){for(const y of a.scrollContainerSelectors){const x=document.querySelector(y);if(x)return x}return window}function W(a){return"scrollY"in a?a.scrollY:a.scrollTop}const de=2e3,ue=2e3,me=3,g=170,I=200,ye=1300,pe=2600,fe=2e3,ge=250,K=ie();if(!K)console.warn("[DoomScroller] No config for",window.location.hostname);else{let a=function(e){const t=Math.max(0,e),n=Math.ceil(t/1e3),o=Math.floor(n/60),s=n%60;return`${o}:${s.toString().padStart(2,"0")}`},y=function(e){return e==="scroll_sprint"?"Scroll Sprint":e==="target_chase"?"Target Chase":e==="app_lockdown"?"App Lockdown":"Battle"},x=function(){if(m&&C&&w&&v&&document.documentElement.contains(m))return m;const e=document.createElement("div");e.style.position="fixed",e.style.top="18px",e.style.left="50%",e.style.transform="translateX(-50%)",e.style.zIndex="2147483645",e.style.pointerEvents="none",e.style.minWidth="178px",e.style.maxWidth="calc(100vw - 24px)",e.style.padding="8px 14px 10px",e.style.borderRadius="14px",e.style.border="1px solid rgba(34,197,94,0.72)",e.style.background="linear-gradient(135deg, rgba(34,197,94,0.25), rgba(15,23,42,0.88))",e.style.backdropFilter="blur(8px)",e.style.boxShadow="0 0 24px rgba(34,197,94,0.36)",e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="center",e.style.gap="2px",e.style.fontFamily="JetBrains Mono, Inter, system-ui, sans-serif";const t=document.createElement("div");t.style.fontSize="10px",t.style.textTransform="uppercase",t.style.letterSpacing="0.08em",t.style.fontWeight="700",t.style.color="#86efac",t.textContent="Battle time left";const n=document.createElement("div");n.style.fontSize="30px",n.style.lineHeight="1",n.style.fontWeight="800",n.style.letterSpacing="0.04em",n.style.color="#39ff14",n.style.textShadow="0 0 12px rgba(57,255,20,0.7)",n.textContent="0:00";const o=document.createElement("div");return o.style.fontSize="10px",o.style.letterSpacing="0.05em",o.style.opacity="0.9",o.style.color="#d1fae5",o.style.textAlign="center",o.textContent="Room ------",e.appendChild(t),e.appendChild(n),e.appendChild(o),(document.body??document.documentElement).appendChild(e),m=e,C=t,w=n,v=o,e},R=function(){m&&(m.remove(),m=null),C=null,w=null,v=null},b=function(){c=null,R()},N=function(){if(!c){R();return}const e=Date.now();if(e>=c.roundEndMs){b();return}const t=e<c.roundStartMs,n=t?c.roundStartMs-e:c.roundEndMs-e,o=x(),s=C,l=w,i=v;!s||!l||!i||(t?(o.style.border="1px solid rgba(34,211,238,0.82)",o.style.background="linear-gradient(135deg, rgba(34,211,238,0.28), rgba(15,23,42,0.88))",o.style.boxShadow="0 0 24px rgba(34,211,238,0.36)",s.style.color="#67e8f9",l.style.color="#67e8f9",l.style.textShadow="0 0 12px rgba(34,211,238,0.66)",s.textContent="Battle starts in"):(o.style.border="1px solid rgba(34,197,94,0.72)",o.style.background="linear-gradient(135deg, rgba(34,197,94,0.25), rgba(15,23,42,0.88))",o.style.boxShadow="0 0 24px rgba(34,197,94,0.36)",s.style.color="#86efac",l.style.color="#39ff14",l.style.textShadow="0 0 12px rgba(57,255,20,0.7)",s.textContent="Battle time left"),l.textContent=a(n),i.textContent=`Room ${c.roomKey} ‚Ä¢ ${y(c.gameType)}`)},P=function(e){if(!(e!=null&&e.active)){b();return}const t=Date.parse(e.roundStartedAt??""),n=Date.parse(e.roundEndsAt??"");if(!Number.isFinite(t)||!Number.isFinite(n)||n<=t){b();return}c={roomKey:e.roomKey||"------",gameType:e.gameType??null,roundStartMs:t,roundEndMs:n},N()},G=function(){if(u&&document.documentElement.contains(u))return u;const e=document.createElement("div");return e.style.position="fixed",e.style.top="18px",e.style.right="18px",e.style.zIndex="2147483646",e.style.pointerEvents="none",e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="flex-end",e.style.gap="8px",(document.body??document.documentElement).appendChild(e),u=e,e},k=function(e,t){const n=Date.now(),o=Math.max(n,O),s=Math.max(0,o-n),l=M?t+80:g+t+I+30;O=o+l,window.setTimeout(()=>{const i=G(),r=e();if(r.style.opacity="0",r.style.transform=M?"translateY(0) scale(1)":"translateY(10px) scale(0.94)",r.style.transition=M?"none":`opacity ${g}ms ease, transform ${g}ms ease`,i.appendChild(r),M){r.style.opacity="1",window.setTimeout(()=>{r.remove()},t);return}window.setTimeout(()=>{r.style.opacity="1",r.style.transform="translateY(0) scale(1)"},16),window.setTimeout(()=>{r.style.transition=`opacity ${I}ms ease, transform ${I}ms ease`,r.style.opacity="0",r.style.transform="translateY(-8px) scale(0.98)"},g+t),window.setTimeout(()=>{r.remove()},g+t+I+24)},s)},X=function(){const e=document.createElement("div");return e.textContent="ü™ô +1 Coin",e.style.padding="11px 16px",e.style.borderRadius="999px",e.style.background="linear-gradient(135deg, rgba(255,230,80,0.56), rgba(245,158,11,0.52))",e.style.border="2px solid rgba(253,224,71,0.95)",e.style.color="#fffde9",e.style.fontFamily="JetBrains Mono, Inter, system-ui, sans-serif",e.style.fontSize="16px",e.style.fontWeight="800",e.style.letterSpacing="0.03em",e.style.textShadow="0 0 10px rgba(255,245,157,0.85)",e.style.boxShadow="0 0 24px rgba(250,204,21,0.78), 0 0 42px rgba(245,158,11,0.44)",e.style.backdropFilter="blur(6px)",e},J=function(e){return e==="legendary"?{border:"1px solid rgba(244,114,182,0.95)",background:"linear-gradient(135deg, rgba(244,114,182,0.28), rgba(217,70,239,0.32))",glow:"0 0 26px rgba(217,70,239,0.55), 0 0 42px rgba(244,114,182,0.38)",titleColor:"#fce7f3"}:e==="epic"?{border:"1px solid rgba(56,189,248,0.9)",background:"linear-gradient(135deg, rgba(34,211,238,0.25), rgba(59,130,246,0.32))",glow:"0 0 24px rgba(56,189,248,0.52), 0 0 38px rgba(59,130,246,0.32)",titleColor:"#e0f2fe"}:e==="rare"?{border:"1px solid rgba(74,222,128,0.95)",background:"linear-gradient(135deg, rgba(74,222,128,0.22), rgba(34,197,94,0.3))",glow:"0 0 22px rgba(74,222,128,0.45)",titleColor:"#dcfce7"}:{border:"1px solid rgba(148,163,184,0.8)",background:"linear-gradient(135deg, rgba(148,163,184,0.2), rgba(100,116,139,0.25))",glow:"0 0 14px rgba(148,163,184,0.3)",titleColor:"#f8fafc"}},U=function(e){const t=J(e.rarity),n=document.createElement("div");n.style.width="min(320px, calc(100vw - 32px))",n.style.padding="12px 14px",n.style.borderRadius="14px",n.style.border=t.border,n.style.background=t.background,n.style.backdropFilter="blur(8px)",n.style.boxShadow=t.glow,n.style.color="#e5e7eb",n.style.fontFamily="JetBrains Mono, Inter, system-ui, sans-serif";const o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.gap="8px",o.style.marginBottom="6px";const s=document.createElement("span");s.textContent=e.icon||"üèÜ",s.style.fontSize="20px",s.style.lineHeight="1";const l=document.createElement("span");l.textContent=e.title||"New Achievement",l.style.fontSize="13px",l.style.fontWeight="800",l.style.letterSpacing="0.04em",l.style.color=t.titleColor,l.style.textTransform="uppercase";const i=document.createElement("span");i.textContent=e.rarity.toUpperCase(),i.style.marginLeft="auto",i.style.fontSize="10px",i.style.opacity="0.9",o.appendChild(s),o.appendChild(l),o.appendChild(i);const r=document.createElement("div");r.textContent=e.description,r.style.fontSize="12px",r.style.lineHeight="1.35",r.style.opacity="0.95",r.style.marginBottom="6px";const p=document.createElement("div");return p.textContent=e.roastLine,p.style.fontSize="11px",p.style.lineHeight="1.35",p.style.opacity="0.84",p.style.fontStyle="italic",n.appendChild(o),e.description&&n.appendChild(r),e.roastLine&&n.appendChild(p),n},j=function(e){if(!(e<=0))for(let t=0;t<e;t+=1)k(X,ye)},q=function(e){k(()=>U(e),pe)},Q=function(e){if(!e||typeof e!="object")return!1;const t=e;if(t.type!=="ACHIEVEMENT_TOAST"||!t.payload||typeof t.payload!="object")return!1;const n=t.payload;return typeof n.eventKey=="string"&&typeof n.title=="string"&&typeof n.description=="string"&&typeof n.icon=="string"&&typeof n.rarity=="string"&&typeof n.roastLine=="string"},Z=function(e){if(!Number.isFinite(e)||e<=0||(h+=e,!A))return;const t=B(T+h),n=t-E;n>0&&(j(n),E=t)},F=function(){if(!d)return;const e=W(d),t=Math.abs(e-_);t>1&&t<5e4&&(f+=t),_=e},H=function(){d&&d.removeEventListener("scroll",F)},z=function(){const e=ce(S);d!==e&&(H(),d=e,_=W(d),d.addEventListener("scroll",F,{passive:!0}))};const S=K;let f=0,d=null,_=0,T=0,h=0,E=0,A=!1,D=0,L=null,u=null,O=0,m=null,C=null,w=null,v=null,c=null;const M=window.matchMedia("(prefers-reduced-motion: reduce)").matches;async function Y(){try{const e=await chrome.runtime.sendMessage({type:"GET_BATTLE_TIMER"});P(e)}catch{}}async function V(){D+=1;try{const e=await chrome.runtime.sendMessage({type:"GET_STATS"}),t=Number((e==null?void 0:e.totalMeters)??0);if(Number.isFinite(t)){T=t,A=!0,E=B(T+h);return}}catch{}if(D<me){L=window.setTimeout(()=>{V()},ue);return}T=0,A=!0,E=B(h)}const $=e=>{Q(e)&&q(e.payload)};chrome.runtime.onMessage.addListener($),z();const ee=setInterval(z,de);V(),Y();const te=window.setInterval(()=>{Y()},fe),ne=window.setInterval(()=>{N()},ge),oe=setInterval(()=>{if(f>0){const e=f*se,t={type:"SCROLL_UPDATE",payload:{site:S.site,pixels:f,meters:e,timestamp:Date.now()}};chrome.runtime.sendMessage(t).catch(()=>{}),Z(e),f=0}},le);window.addEventListener("beforeunload",()=>{clearInterval(ee),clearInterval(oe),clearInterval(te),clearInterval(ne),chrome.runtime.onMessage.removeListener($),L!==null&&window.clearTimeout(L),u&&(u.remove(),u=null),b(),H()}),console.log("[DoomScroller] Tracking scroll on",S.site,"(",S.hostname,")")}
